<UserControl x:Class="<%= unity3dAppName %>.<%= persistClass %>View" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" mc:Ignorable="d"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:noesis="clr-namespace:NoesisGUIExtensions;assembly=Noesis.GUI.Extensions" xmlns:local="clr-namespace:<%= unity3dAppName %>"
    d:DesignWidth="1280" d:DesignHeight="720">

<UserControl.Resources>
    <Storyboard x:Key="FadeIn">
        <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsEnabled)" Storyboard.TargetName="LayoutRoot">
            <DiscreteBooleanKeyFrame KeyTime="0:0:2" Value="True"/>
        </BooleanAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="LayoutRoot">
            <EasingDoubleKeyFrame KeyTime="0:0:0" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="Add<%= persistClass %>Button">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2.2" Value="1">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BackEase EasingMode="EaseOut" Amplitude="0.2"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="Add<%= persistClass %>Button">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:1.9" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:2.2" Value="1">
                <EasingDoubleKeyFrame.EasingFunction>
                    <BackEase EasingMode="EaseOut" Amplitude="0.2"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="FadeOut">
        <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsEnabled)" Storyboard.TargetName="LayoutRoot">
            <DiscreteBooleanKeyFrame KeyTime="0:0:0.5" Value="False"/>
        </BooleanAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="LayoutRoot">
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0">
                <EasingDoubleKeyFrame.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </EasingDoubleKeyFrame.EasingFunction>
            </EasingDoubleKeyFrame>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>

</UserControl.Resources>

<Viewbox x:Name="LayoutRoot" Margin="20">

    <Viewbox.Resources>
        <LinearGradientBrush x:Key="BgBrush" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Offset="0" Color="#FF9BDEFF"/>
            <GradientStop Offset="1" Color="#FF69B5FF"/>
        </LinearGradientBrush>
    </Viewbox.Resources>

    <b:Interaction.Triggers>
        <b:EventTrigger EventName="Loaded">
            <b:ChangePropertyAction TargetName="LayoutRoot" PropertyName="Tag" Value="<%= persistClass %>Detail"/>
        </b:EventTrigger>
        <b:DataTrigger Binding="{Binding Tag, ElementName=LayoutRoot}" Value="<%= persistClass %>Detail">
            <b:ControlStoryboardAction Storyboard="{StaticResource FadeIn}"/>
        </b:DataTrigger>
        <b:DataTrigger Binding="{Binding State}" Comparison="NotEqual" Value="{x:Static local:State.<%= persistClass %>Detail}">
            <b:ControlStoryboardAction Storyboard="{StaticResource FadeOut}"/>
        </b:DataTrigger>
        <b:KeyTrigger Key="Esc" ActiveOnFocus="True">
            <b:PlaySoundAction Source="/<%= unity3dAppName %>;component/Assets/<%= unity3dAppName %>/Sounds/WaterDropBig.mp3" Volume="0.5"/>
            <b:InvokeCommandAction Command="{Binding MenuCommand}"/>
        </b:KeyTrigger>
    </b:Interaction.Triggers>

    <DockPanel x:Name="DockPanel">
        <Border DockPanel.Dock="Top" Margin="4,0,4,4" Padding="0" Height="75" Background="#99031D29" CornerRadius="10">
            <TextBlock Text="Add <%= persistClass %>!" FontSize="48" FontFamily="/<%= unity3dAppName %>;component/Assets/<%= unity3dAppName %>/Fonts/#Jungle Adventurer" Margin="0,0,0,0" HorizontalAlignment="Center" VerticalAlignment="Center" Height="69" Width="500" TextAlignment="Center" Padding="0,10,0,0" Background="#FF031D29">
                <TextBlock.Effect>
                    <DropShadowEffect/>
                </TextBlock.Effect>
                <TextBlock.Foreground>
                    <LinearGradientBrush EndPoint="1,0" StartPoint="0,0">
                        <GradientStop Color="#FFE0EAF1" Offset="0"/>
                        <GradientStop Color="#FFFD7A0A" Offset="1"/>
                    </LinearGradientBrush>
                </TextBlock.Foreground>
            </TextBlock>
        </Border>

        <Border DockPanel.Dock="Left" BorderThickness="5" Margin="0,0,0,0" Padding="0" Width="425" CornerRadius="20,20,20,20">
            <local:LeftMenuPanel x:Name="LeftMenuPanel" ExitButton="MAIN MENU" ExitButtonCommand="ExitCommand" ButtonOne="QUIZZ" ButtonOneCommand="On<%= persistClass %>" Description="Add A <%= persistClass %>" AcceptText="ACCEPT" CancelText="QUIT" RenderTransformOrigin="0.5,0.5" Margin="0,0,0,10" Width="450" HorizontalAlignment="Center" VerticalAlignment="Center">
                <local:LeftMenuPanel.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform/>
                        <TranslateTransform/>
                    </TransformGroup>
                </local:LeftMenuPanel.RenderTransform>
            </local:LeftMenuPanel>

        </Border>
        <Border DockPanel.Dock="Right" BorderThickness="2" Margin="4" Padding="0" CornerRadius="20,20,20,20">
            <Grid Margin="0,0,0,0">
                <Border BorderThickness="5" CornerRadius="10" Padding="0,10,0,0" Margin="0,10,0,0">
                    <Border.BorderBrush>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF011721" Offset="0"/>
                            <GradientStop Color="#FF031D29" Offset="1"/>
                            <GradientStop Color="#FF0C3F57" Offset="0.221"/>
                            <GradientStop Color="#CC387795" Offset="0.81"/>
                        </LinearGradientBrush>
                    </Border.BorderBrush>
                    <Border.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#6617506B" Offset="0"/>
                            <GradientStop Color="#66125D80" Offset="1"/>
                            <GradientStop Color="#66071C23" Offset="0.204"/>
                            <GradientStop Color="#660C313E" Offset="0.514"/>
                            <GradientStop Color="#660F4F6D" Offset="0.84"/>
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>

                <StackPanel Margin="0,50,0,0" VerticalAlignment="Top" HorizontalAlignment="Stretch">
                    <%_ for (const field of fields.filter(field=> !field.transient && (embedded || !field.id || !primaryKey.composite))) { _%>
                    <StackPanel Height="70" Margin="0,0,20,0" VerticalAlignment="Center" Orientation="Horizontal"
                        HorizontalAlignment="Right">
                        <Label Content="<%= javaBeanCase(field.fieldName) %>" HorizontalAlignment="Left" Name="LBL<%= javaBeanCase(field.fieldName) %>" VerticalAlignment="Center"
                            Margin="13,0,0,0" Foreground="#FF00B3FA" />
                        <TextBox Text="{Binding <%= javaBeanCase(field.fieldName) %>}" Style="{StaticResource Style.Text.Box}" Name="<%= javaBeanCase(field.fieldName) %>"
                            Margin="10,0,10,10" Foreground="#FFA5CCCF" Padding="0,10,0,0" HorizontalAlignment="Center"
                            FontFamily="White Rabbit" FontStyle="Normal" Width="400" Height="50">
                            <b:Interaction.Triggers>
                                <b:EventTrigger EventName="GotFocus">
                                    <noesis:SelectAllAction />
                                </b:EventTrigger>
                            </b:Interaction.Triggers>
                            <TextBox.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform />
                                    <SkewTransform />
                                    <RotateTransform />
                                    <TranslateTransform />
                                </TransformGroup>
                            </TextBox.RenderTransform>
                        </TextBox>
                    </StackPanel>
                    <%_ } _%>

                    <%_ for (reference of dtoReferences) { _%>
                        <%_ if (reference.collection && reference.relationship) { _%>
                            <!-- Implement with set references  -->      
                        <%_ } else if (reference.relationship) { _%>
                    <StackPanel Height="70" Margin="0,0,20,0" VerticalAlignment="Center" Orientation="Horizontal" HorizontalAlignment="Right">
                        <Label Content="Select <%= reference.relationship.otherEntity.entityNameCapitalized %>:" HorizontalAlignment="Left" Name="<%= reference.relationship.otherEntity.entityNameCapitalized %>IDLabel" VerticalAlignment="Center" Margin="0,0,0,0" Foreground="#FF00B3FA"/>
                        <ComboBox x:Name="<%= reference.relationship.otherEntity.entityNameCapitalized %>Select" Style="{StaticResource Style.ComboBox}"  ItemsSource="{Binding <%= reference.relationship.otherEntity.entityNameCapitalized %>es}" SelectedIndex="{Binding <%= reference.relationship.otherEntity.entityNameCapitalized %>}" noesis:Text.Placeholder="{Binding <%= reference.relationship.otherEntity.entityNameCapitalized %>Placeholder}" Width="400" Margin="10,0,10,10" RenderTransformOrigin="0.5,0.5" Height="50" FontFamily="/<%= unity3dAppName %>;component/Assets/<%= unity3dAppName %>/Fonts/#White Rabbit" FontSize="16">
                            <ComboBox.RenderTransform>
                                <TransformGroup>
                                    <ScaleTransform/>
                                    <SkewTransform/>
                                    <RotateTransform/>
                                    <TranslateTransform/>
                                </TransformGroup>
                            </ComboBox.RenderTransform>
                        </ComboBox>
                    </StackPanel>
                        <%_ } _%>
                    <%_ } _%>
                    

                    <Rectangle Height="3
                                   " Width="707" Margin="0,10,0,10">
                        <Rectangle.Fill>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#00A5CCCF"/>
                                <GradientStop Color="#7FA5CCCF" Offset="0.4"/>
                                <GradientStop Color="#7FA5CCCF" Offset="0.6"/>
                                <GradientStop Offset="1" Color="#00A5CCCF"/>
                            </LinearGradientBrush>
                        </Rectangle.Fill>
                    </Rectangle>
                    <Button x:Name="Add<%= persistClass %>Button" Content="Accept" Style="{StaticResource Style.Button.Menu}" Command="{Binding Add<%= persistClass %>Command}" Margin="0,20,0,10"/>
                    <StackPanel Height="70" Margin="0,0,20,0" VerticalAlignment="Center" Orientation="Horizontal" HorizontalAlignment="Center">
                        <Label Content="Status:" HorizontalAlignment="Left" Name="New<%= persistClass %>DebugIDLabel" VerticalAlignment="Center" Margin="0,0,0,0" Foreground="#FF00B3FA"/>
                        <TextBlock noesis:Text.Placeholder="New <%= persistClass %> Added..." Margin="10,0,10,10" Foreground="#FFA5CCCF" Padding="0,10,0,0" HorizontalAlignment="Center" FontFamily="White Rabbit" FontStyle="Normal" Width="400" Height="50"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>
    </DockPanel>

</Viewbox>
</UserControl>